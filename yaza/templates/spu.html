{% extends "layout.html" %}
{% block customized_head_block %}
  
  <link rel="stylesheet" href="{{ url_for('static', filename='components/blueimp-file-upload/css/jquery.fileupload-ui.css') }}"/>
{% endblock %}

{% block customized_tail_block %}
  {% if config.DEBUG %}
    <script type="text/javascript" data-main="{{ url_for('static', filename='js/spu/main.js', bust=time) }}" src="{{ url_for('static', filename='components/requirejs/require.js') }}"></script>
  {% else %}
    <script type="text/javascript" data-main="{{ url_for('static', filename='dist/js/spu/main.js', bust=time) }}" src="{{ url_for('static', filename='components/requirejs/require.js') }}"></script>
  {% endif %}
{% endblock %}

{% block main %}
  <div class="container-fluid">
    <div class="primary">
      <input name="spu" type="hidden" data-val='{{ spu.as_dict()|tojson|safe }}'/>
      <div class="row">
        <div class="col-sm-12">
          <div class="row">
            <div class="play-ground">
              <div class="play-ground col-sm-5">
                <div class="touch-screen">
                  <div class="editable-region"></div>
                </div>
                <div class="dashboard">
                  <div class="panel panel-default">
                    <div class="panel-body bg-info">
                      <div class="btn-group">
                        <button class="btn btn-success add-img-btn" data-toggle='modal' data-target='.add-img-modal'>
                          <i class="fa fa-plus"></i>
                          增加图片
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="modal fade add-img-modal">
                    <div class="modal-dialog modal-lg">
                      <div class="modal-content">
                        <div class="modal-body">
                        </div>
                        <div class="modal-footer">
                          <form class='upload-img-form' method="post" action="{{ url_for('image.upload') }}" enctype="multipart/form-data">
                            <span class="btn btn-success fileinput-button">
                              <i class="glyphicon glyphicon-plus"></i>
                              <span>上传新图片</span>
                              <input type="file" name="files[]">
                            </span>

                            <div class='uploading-progress'>
                              <!-- The file uploads will be shown here -->
                            </div>
                          </form>
                          <button type="button" class="btn-ok btn btn-primary">确认</button>
                          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        </div>
                      </div>
                      <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                  </div>
                  <!-- /.modal -->
                </div>
              </div>
              
              <div class="jit-preview col-sm-7">

              </div>
            </div>
          </div>
          <div class="row">
            <div class="details">
              <div class="panel panel-primary">
                <div class="panel-heading">
                    已选择的图片
                </div>
                <div class="panel-body row" id="selected-imgs">

                </div>
              </div>
              <ul class="nav nav-tabs">
                <li><a data-toggle="tab" href="#builtin-pics">Builtin Pics</a></li>
                <li><a href="#customer-pics" data-toggle="tab">Customer Pics</a></li>
              </ul>
              <div class="tab-content">
                <div class="tab-pane fade" id="builtin-pics">
                  <div class="picker">
                    <select class="image-picker form-control" name="image-picker-select" id="builtin-pic-select" multiple>
                      {% for design_image in design_image_list %}
                        <option data-img-src="{{ design_image.pic_url }}" value="{{ design_image.id }}" data-img-label="{{ design_image.title }}">{{ design_image.title }}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                <div class="tab-pane fade" id="customer-pics">


                </div>
              </div>
            </div>
          </div>
        </div>
        <!--/span-->
      </div>
      <!--/row-->
    </div>

    <hr/>
    <footer class="footer visible-md visible-lg">
      <div class="container">
        <div class="text-muted">
          copyright@Yaza
        </div>
      </div>
    </footer>
  </div><!-- /.container -->
{% endblock %}
